(()=>{"use strict";const e={container:document.querySelector(".container"),sidebar:document.querySelector(".sidebar"),mainContent:document.querySelector(".main-content"),menuBars:document.querySelector(".menu-bars"),projectModalEl:document.querySelector(".form-container-project"),todoModalEl:document.querySelector(".form-container-todo"),addProjectBtn:document.querySelector(".add-project-btn"),projectCancelBtn:document.querySelector(".project-cancel-btn"),projectNameInput:document.querySelector(".project-name-input"),projectSubmitBtn:document.querySelector(".project-submit-btn"),projectsListEl:document.querySelector(".projects"),currentProjectName:document.querySelector(".current-project-name"),todoAddBtn:document.querySelector(".add-todo"),todoCancelBtn:document.querySelector(".todo-cancel-btn"),todoSubmitBtn:document.querySelector(".todo-submit-btn"),todoModalEl:document.querySelector(".form-container-todo"),todoNameInput:document.querySelector(".todo-name-input"),todoDescriptionInput:document.querySelector(".task-description-input"),todoDateInput:document.querySelector(".task-duedate-input"),todoPriorityInput:document.querySelector("#priority"),todosContainer:document.querySelector(".todos-container")};function t(){setTimeout((()=>{e.projectNameInput.value=""}),1e3)}const o={getUISelectors:function(){return e},toggleSidebar:function(){e.sidebar.classList.toggle("sidebar-toggle"),e.mainContent.classList.toggle("main-content-toggle"),e.menuBars.classList.toggle("change")},toggleProjectModal:function(){e.projectModalEl.classList.toggle("form-container-project-hidden"),e.container.classList.toggle("container-opaque"),t()},getProjectName:function(){return e.projectNameInput.value},renderSidebar:function(o){e.projectsListEl.textContent="",o.forEach(((t,o)=>{const n=t.name,c=document.createElement("li");c.className="project";const r=document.createElement("span");r.className="project-todos-number";const a=document.createElement("p");a.textContent="3";const d=document.createElement("p");d.className="project-name",d.textContent=`${n}`;const s=document.createElement("i");s.id="delete-project-btn",s.className="fas fa-trash",c.setAttribute("data-index",o),r.appendChild(a),c.append(r,d,s),e.projectsListEl.appendChild(c)})),t()},getProjectIndex:function(e){return e.target.parentElement.getAttribute("data-index")},renderCurrentProjectName:function(t){e.currentProjectName.textContent=t.currentProject.name},toggleTodoModal:function(){e.todoModalEl.classList.toggle("form-container-todo-hidden"),e.container.classList.toggle("container-opaque")},getTodoInput:function(){return{todoName:e.todoNameInput.value,todoDescription:e.todoDescriptionInput.value,todoDate:e.todoDateInput.value,todoPriority:e.todoPriorityInput.value}},renderCurrentProjectTodos:function(t){t.forEach(((t,o)=>{const{name:n,description:c,date:r,priority:a,projectName:d,isCompleted:s}=t,i=document.createElement("div");i.className="todo",i.setAttribute("data-index",o);const u=document.createElement("div");u.className="todo-name-checkbox";const l=document.createElement("input");l.type="checkbox",l.name="isCompleted",l.id="completed",s&&l.checked;const m=document.createElement("div");m.className="todo-name",m.textContent=`${n}`;const p=document.createElement("div");p.className="todo-date-btns";const j=document.createElement("div");j.className="todo-date",j.textContent=`${r}`;const g=document.createElement("i");g.className="far fa-edit";const f=document.createElement("i");f.className="fas fa-times",u.append(l,m),p.append(j,g,f),i.append(u,p),e.todosContainer.insertBefore(i,e.todoAddBtn)}))}};class n{constructor(e){this.name=e,this.todos=[]}addProject(){r.projects.push(this)}}class c{constructor(e,t,o,n,c){this.name=e,this.description=t,this.date=o,this.priority=n,this.projectName=c,this.isCompleted=!1}}const r={projects:[],currentProject:null},a={data:r,createNewProject:function(e){new n(e).addProject()},deleteProjectFromDataArray:function(e){r.projects.splice(e,1)},setCurrentProject:function(e){r.currentProject=r.projects[e]},createNewTodo:function(e,t){const{todoName:o,todoDescription:n,todoDate:a,todoPriority:d}=e,s=r.currentProject.name,i=new c(o,n,a,d,s);r.projects[t].todos.push(i)},getCurrentProjectIndex:function(){let e=null;return r.projects.forEach(((t,o)=>{t.name===r.currentProject.name&&(e=o)})),e}};function d(e){const t=o.getProjectName();a.createNewProject(t),o.renderSidebar(a.data.projects),o.toggleProjectModal(),e.preventDefault()}function s(e){const t=o.getTodoInput(),n=a.getCurrentProjectIndex();a.createNewTodo(t,n),o.renderCurrentProjectTodos(a.data.projects[n].todos),o.toggleTodoModal(),e.preventDefault()}function i(e){if("delete-project-btn"===e.target.id){const t=o.getProjectIndex(e);a.deleteProjectFromDataArray(t),o.renderSidebar(a.data.projects)}}function u(e){if("project-name"===e.target.className){const t=o.getProjectIndex(e);a.setCurrentProject(t),o.renderCurrentProjectName(a.data),console.log(a.data)}}!function(){const e=o.getUISelectors();e.menuBars.addEventListener("click",o.toggleSidebar),e.addProjectBtn.addEventListener("click",o.toggleProjectModal),e.projectCancelBtn.addEventListener("click",o.toggleProjectModal),e.todoAddBtn.addEventListener("click",o.toggleTodoModal),e.todoCancelBtn.addEventListener("click",o.toggleTodoModal),e.todoModalEl.addEventListener("submit",s),e.projectModalEl.addEventListener("submit",d),e.projectsListEl.addEventListener("click",i),e.projectsListEl.addEventListener("click",u)}()})();